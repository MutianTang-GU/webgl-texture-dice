(()=>{"use strict";var e="undefined"!=typeof Float32Array?Float32Array:Array;function t(){var t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function r(e,t,r,o){const n=e.getUniformLocation(t,r);e.uniformMatrix4fv(n,!1,o)}function o(e,t,r,o){const n=e.getUniformLocation(t,r);e.uniform3fv(n,o)}function n(){const e=document.getElementById("gl-canvas").getContext("webgl2");if(null===e)return void alert("Unable to initialize WebGL. Your browser or machine may not support it.");e.clearColor(1,1,1,1);const{vertexPositions:n,vertexNormals:i,indices:a}=function(e){var t=[],r=[],o=[],n=[];function i(e,i){var a,c=t.length/3;for(a=0;a<12;a++)t.push(e[a]);for(a=0;a<4;a++)r.push(i[0],i[1],i[2]);o.push(0,0,1,0,1,1,0,1),n.push(c,c+1,c+2,c,c+2,c+3)}return i([-1,-1,1,1,-1,1,1,1,1,-1,1,1],[0,0,1]),i([-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1],[0,0,-1]),i([-1,1,-1,-1,1,1,1,1,1,1,1,-1],[0,1,0]),i([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1],[0,-1,0]),i([1,-1,-1,1,1,-1,1,1,1,1,-1,1],[1,0,0]),i([-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],[-1,0,0]),{vertexPositions:new Float32Array(t),vertexNormals:new Float32Array(r),vertexTextureCoords:new Float32Array(o),indices:new Uint16Array(n)}}(),c=new Float32Array([0,.5,.25,.5,.25,.75,0,.75,.5,.25,.75,.25,.75,.5,.5,.5,.25,.5,.5,.5,.5,.75,.25,.75,.5,.75,.75,.75,.75,1,.5,1,.5,.5,.75,.5,.75,.75,.5,.75,.75,.5,1,.5,1,.75,.75,.75]),A=function(e,t,r){const o=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Error("An error occurred compiling the shaders"+e.getShaderInfoLog(o));const n=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("An error occurred compiling the shaders"+e.getShaderInfoLog(n));const i=e.createProgram();if(e.attachShader(i,o),e.attachShader(i,n),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw new Error("Unable to initialize the shader program: "+e.getProgramInfoLog(i));return e.useProgram(i),i}(e,"#version 300 es\nprecision mediump float;in vec3 vertPosition;in vec3 vertNormal;in vec2 texCoord;out vec3 v_lighting;out vec2 v_texCoord;uniform mat4 viewMatrix;uniform mat4 projMatrix;uniform vec3 lightDirection;uniform vec3 ambientLightColor;uniform vec3 diffuseLightColor;void main(){gl_Position=projMatrix*viewMatrix*vec4(vertPosition,1.);v_texCoord=texCoord;mat4 A=transpose(inverse(viewMatrix));vec3 B=normalize(A*vec4(vertNormal,1.)).xyz;float C=max(dot(B,lightDirection),0.);v_lighting=ambientLightColor+(diffuseLightColor*C);}","#version 300 es\nprecision mediump float;in vec2 v_texCoord;in vec3 v_lighting;out vec4 outColor;uniform sampler2D sampler;void main(){vec4 A=texture(sampler,v_texCoord);outColor=vec4(A.rgb*v_lighting,A.a);}");!function(e,t,r,o,n,i,a,c,A){const s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW);const E=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,E),e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW);const u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW);const f=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,f),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW);const R=e.getAttribLocation(t,"vertPosition");e.enableVertexAttribArray(R),e.bindBuffer(e.ARRAY_BUFFER,s);{const t=3,r=e.FLOAT,o=!1,n=0,i=0;e.vertexAttribPointer(R,t,r,o,n,i)}const l=e.getAttribLocation(t,"vertNormal");e.enableVertexAttribArray(l),e.bindBuffer(e.ARRAY_BUFFER,E);{const t=3,r=e.FLOAT,o=!1,n=0,i=0;e.vertexAttribPointer(l,t,r,o,n,i)}const T=e.getAttribLocation(t,"texCoord");e.enableVertexAttribArray(T),e.bindBuffer(e.ARRAY_BUFFER,u);{const t=2,r=e.FLOAT,o=!1,n=0,i=0;e.vertexAttribPointer(T,t,r,o,n,i)}}(e,A,n,i,c,a);const s=t();!function(e,t,r,o,n){var i,a=1/Math.tan(t/2);e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(i=1/(o-n),e[10]=(n+o)*i,e[14]=2*n*o*i):(e[10]=-1,e[14]=-2*o)}(s,45*Math.PI/180,e.canvas.clientWidth/e.canvas.clientHeight,.1,100);const E=t();var u,f,R,l,T,m,v,d,_,h,g,F,x,U,b,B,L,P;B=(R=[0,0,-6])[0],L=R[1],P=R[2],(f=E)===(u=E)?(u[12]=f[0]*B+f[4]*L+f[8]*P+f[12],u[13]=f[1]*B+f[5]*L+f[9]*P+f[13],u[14]=f[2]*B+f[6]*L+f[10]*P+f[14],u[15]=f[3]*B+f[7]*L+f[11]*P+f[15]):(l=f[0],T=f[1],m=f[2],v=f[3],d=f[4],_=f[5],h=f[6],g=f[7],F=f[8],x=f[9],U=f[10],b=f[11],u[0]=l,u[1]=T,u[2]=m,u[3]=v,u[4]=d,u[5]=_,u[6]=h,u[7]=g,u[8]=F,u[9]=x,u[10]=U,u[11]=b,u[12]=l*B+d*L+F*P+f[12],u[13]=T*B+_*L+x*P+f[13],u[14]=m*B+h*L+U*P+f[14],u[15]=v*B+g*L+b*P+f[15]),r(e,A,"projMatrix",s),r(e,A,"viewMatrix",E),o(e,A,"lightDirection",[2,1,1]),o(e,A,"ambientLightColor",[.3,.3,.3]),o(e,A,"diffuseLightColor",[.7,.7,.7]);const S=e.createTexture();e.bindTexture(e.TEXTURE_2D,S),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([221,221,221,255])),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);const D=new Image;D.src="./dice_uv.png",D.addEventListener("load",(function(){e.bindTexture(e.TEXTURE_2D,S),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,D),e.generateMipmap(e.TEXTURE_2D)}));let C=0;requestAnimationFrame((function t(o){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE);const n=o-C;C=o,function(e,t,r,o){var n,i,a,c,A,s,E,u,f,R,l,T,m,v,d,_,h,g,F,x,U,b,B,L,P=o[0],S=o[1],D=o[2],C=Math.hypot(P,S,D);C<1e-6||(P*=C=1/C,S*=C,D*=C,n=Math.sin(r),a=1-(i=Math.cos(r)),c=t[0],A=t[1],s=t[2],E=t[3],u=t[4],f=t[5],R=t[6],l=t[7],T=t[8],m=t[9],v=t[10],d=t[11],_=P*P*a+i,h=S*P*a+D*n,g=D*P*a-S*n,F=P*S*a-D*n,x=S*S*a+i,U=D*S*a+P*n,b=P*D*a+S*n,B=S*D*a-P*n,L=D*D*a+i,e[0]=c*_+u*h+T*g,e[1]=A*_+f*h+m*g,e[2]=s*_+R*h+v*g,e[3]=E*_+l*h+d*g,e[4]=c*F+u*x+T*U,e[5]=A*F+f*x+m*U,e[6]=s*F+R*x+v*U,e[7]=E*F+l*x+d*U,e[8]=c*b+u*B+T*L,e[9]=A*b+f*B+m*L,e[10]=s*b+R*B+v*L,e[11]=E*b+l*B+d*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(E,E,.001*n,[0,3,2]),r(e,A,"viewMatrix",E),e.drawElements(e.TRIANGLES,36,e.UNSIGNED_SHORT,0),requestAnimationFrame(t)}))}"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)})();